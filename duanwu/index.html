<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv= "expires" content= "0"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>我只“粽”意你</title>
    <link rel="stylesheet" href="../css/duanwu_css/base.css">
    <link rel="stylesheet" href="https://cdn.dowebok.com/98/css/animate.min.css">
    <style>
        *{margin: 0;padding: 0;}
        html,body{width: 100%;height: 100%;background: url(../images/duanwu_img/diban.png) bottom center repeat;background-size: 100%;}
        .con{width: 100%;height: 100%;position: relative;background: url(../images/duanwu_img/001-bg.png) top center no-repeat;background-size: 100%;}
        /* .img img{width: 100%;height: auto;display: block;margin: 0 auto;} */
        .con a{width: 60px;height: 60px;position: absolute;bottom: 10%;left: 20%;}
        .con img{width: 100%;height: 100%;}
        .ji{width: 180px;height: auto;position: absolute;left: 0;bottom: 0;}
        .text{width: 150px;height: auto;position: absolute;right: 18%;top: 5%;}
        .con::-webkit-scrollbar { width: 0 !important }
        .con::-webkit-scrollbar { display: none; }
        .con { -ms-overflow-style: none; }
        .con { overflow: -moz-scrollbars-none; }
    </style>
    <script src="https://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
    <script type="text/javascript">
      function is_weixin(){
        var ua = navigator.userAgent.toLowerCase();
        if(ua.match(/MicroMessenger/i)=="micromessenger") {//alert(1);
          return true;
        } else {//alert(2)
          return false;
        };
      };
      if(is_weixin()){
        var link = "${obj.link?!''}";
        var type = "link";
        var dataUrl = "";//"${obj.dataUrl}";
        var img_url = "https://dgtt.besttoptoday.com/series/list/20206/e2i6WpjsE2.jpg";
        wx.config({
          debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
          appId: "${obj.appId?!''}", // 必填，公众号的唯一标识
          timestamp: "${obj.timestamp?!''}", // 必填，生成签名的时间戳
          nonceStr: "${obj.nonceStr?!''}", // 必填，生成签名的随机串
          signature: "${obj.signature?!''}", // 必填，签名，见附录1
          jsApiList: [
            'checkJsApi',
            'onMenuShareTimeline',
            'onMenuShareAppMessage',
            'onMenuShareQQ',
            'onMenuShareWeibo',
            'onMenuShareQZone',
            'hideMenuItems',
            'showMenuItems',
            'hideAllNonBaseMenuItem',
            'showAllNonBaseMenuItem',
            'translateVoice',
            'startRecord',
            'stopRecord',
            'onVoiceRecordEnd',
            'playVoice',
            'onVoicePlayEnd',
            'pauseVoice',
            'stopVoice',
            'uploadVoice',
            'downloadVoice'
          ]  // 必填，需要使用的JS接口列表，所有JS接口列表见附录2 ngrok
        });

        wx.ready(function(){

          wx.hideMenuItems({
            menuList: ["menuItem:copyUrl"] // 要隐藏的菜单项，只能隐藏“传播类”和“保护类”按钮
          });
          // config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。

          //分享到朋友圈
          wx.onMenuShareTimeline({
            title: "这个端午，我只“粽”意你", // 分享标题
            link: link, // 分享链接，该链接域名必须与当前企业的可信域名一致
            imgUrl: img_url , // 分享图标
            dataUrl: dataUrl,
            success: function () {
              // 用户确认分享后执行的回调函数
              // $.post("zhuanfa",{"id":audioId},function(data){console.log("转发成功！")});
            },
            cancel: function () {
              // 用户取消分享后执行的回调函数
            }
          });

          //分享到朋友
          wx.onMenuShareAppMessage({
            title: "这个端午，我只“粽”意你", // 分享标题
            desc: "今今乐道读书会为你献上端午“盲粽”", // 分享描述
            link: link, // 分享链接，该链接域名必须与当前企业的可信域名一致
            imgUrl: img_url, // 分享图标
            type: type, // 分享类型,music、video或link，不填默认为link
            dataUrl: dataUrl, // 如果type是music或video，则要提供数据链接，默认为空
            success: function () {
              // 用户确认分享后执行的回调函数
              // $.post("zhuanfa",{"id":audioId},function(data){console.log("转发成功！")});
            },
            cancel: function () {
              // 用户取消分享后执行的回调函数
            }
          });
        });
      }
    </script>
</head>
<body>
<div style="display:none"><p class="bbh_p">50</p ><p id="shortTitle" style="display:none;">今今乐道读书会为你献上端午“盲粽”</p >
<img src="https://dgtt.besttoptoday.com/series/list/20206/e2i6WpjsE2.jpg" style="display:none;" id="picture"><span id="shareUrl">${obj.link}</span></div>
<div class="con">
	<div class="ji"><img src="../images/duanwu_img/001-ji.png" alt=""></div>
    <div class="text">
        <img src="../images/duanwu_img/001-text.png" alt="">
        #if(obj.OK)
        <a href="javascript:;" class="goTwo wow swing animated tiaozhuan">
            <img src="../images/duanwu_img/001-go.png" alt="">
        </a>
    </div>
    #else
    </div>
    <div class="tip" style="display: none;position: absolute;padding: 10px;background: rgba(0,0,0,.6);color: white;top: 50%;left: 50%;transform: translate(-50%, -50%);border-radius: 10px;"></div>
    #end

</div>
<div class="share" style="display: none;"></div>
<div class="qrcode" style="display: none;"></div>
<script src="../js/jquery-1.8.3.min.js"></script>
<!--分享-->
<script type="text/javascript">
	if(!${obj.OK}){
		$(".tip").html("当前未登录，请登录")
	    $(".tip").show();
	}
  var u = navigator.userAgent, app =  navigator.appVersion;
  var isAndroid = u.indexOf('Android') > -1 ||  u.indexOf('Linux') > -1; //android终端或者uc浏览器
  var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac  OS X/); //ios终端
  var isiosapp = u.indexOf('Safari') == -1 &&  u.indexOf('Language') == -1 &&  u.indexOf('MicroMessenger') == -1;
  var isanapp = u.indexOf('igetapp') > -1;
  //判断该页面是否在微信上？
  function is_weixn(){
    var ua = navigator.userAgent.toLowerCase();
    if(ua.match(/MicroMessenger/i)=="micromessenger")  {//alert(1);
      return true;
    } else {//alert(2)
      return false;
    };
  };
  function toptodayandroid(top){
    var bt = "这个端午，我只“粽”意你";
    var fb =  "今今乐道读书会为你献上端午“盲粽”";
    var pic =  "https://dgtt.besttoptoday.com/series/list/20206/e2i6WpjsE2.jpg";
    var url = "${obj.link}";
    //url = "http://"+url+"/index/share?ucid=${obj.user_id}";
    console.log(url);
    var bb = top;
    $(".bbh_p").text(bb);
    if(bb>=43){
      function chc(){
        window.local_obj.getShareInfo(bt,fb,pic,url);
      };
      chc();
    };
  };
    //ios显示分享按钮
    //微信
    if(is_weixn()){
      $('.qrcode').show();
      $('.share').remove();
    }
    // iOS 浏览器和 Android 浏览器
    if(!is_weixn() && !isiosapp && isiOS || !is_weixn() && !isanapp && isAndroid){
      $('.qrcode').show();
      $('.share').remove();
    }
    // iosAPP AndroidAPP
    if(isiOS&&isiosapp){
      //判断选择的哪个
      $('.share').show();
      $('.qrcode').remove();
      $('.share').click(function(){
          window.location = "share://share_text";
      });
    }else if(isAndroid && isanapp){
      $('.share').show();
      $('.qrcode').remove();
      $('.share').click(function(){
        window.local_obj.shouldStartLoadWithRequest("share://share_text");
      });
    }
</script>
<!--判断环境-->
<script type="text/javascript">
    $(function() {
      //判断手机环境
		function GetQueryString(name){
			 var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
			 var r = window.location.search.substr(1).match(reg);
			 if(r!=null)return  unescape(r[2]); return null;
		};
		var isWKWebview = GetQueryString('isWKWebview')==1?true:false;
		if(isWKWebview == true && isWKWebview!=undefined){
			isWKWebview == true
    	}else{
    		isWKWebview == false
    	}
		$('.tiaozhuan').click(function(){
			window.location.href = "index_two?ucid=${obj.ucid}&isWKWebview="+isWKWebview;
		})
      var u = navigator.userAgent, app = navigator.appVersion;
      var isAndroid = u.indexOf('Android') > -1
        || u.indexOf('Linux') > -1; //android终端或者uc浏览器
      var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
      var isiosapp = u.indexOf('Safari') == -1
        && u.indexOf('Language') == -1
        && u.indexOf('MicroMessenger') == -1;
      var isanapp = u.indexOf('igetapp') > -1;
      function is_weixn() {
        var ua = navigator.userAgent.toLowerCase();
        if (ua.match(/MicroMessenger/i) == "micromessenger") {
          return true;
        } else {
          return false;
        }
        ;
      }
      ;

      if(isiOS && screen.height >= 812 && isiosapp && !is_weixn()){
      // if (isiOS && screen.height >= 812 && !is_weixn()) {
        // iphone x app
        // 兼容iPhone X
        $('html').css("padding-top","88px");
        $('body').css("padding-bottom","34px");
        var oMeta = document.createElement('meta');
        oMeta.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no,viewport-fit=cover';
        oMeta.name = 'viewport';
        document.getElementsByTagName('head')[0].appendChild(oMeta);
        // $(".con a").css({bottom: '28%'})
        $(".ji").css({bottom: '20%'})

      }

      if (screen.height >= 812 && is_weixn()) {
        // iphone x app
        // $('.con').css("padding-top","60px"); // 兼容iPhone X
        var oMeta = document.createElement('meta');
        oMeta.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no,viewport-fit=cover';
        oMeta.name = 'viewport';
        document.getElementsByTagName('head')[0].appendChild(oMeta);
        // $(".con a").css({bottom: '28%'})
        $(".ji").css({bottom: '20%'})
      }



        if ((screen.height < 667 && !is_weixn())) {
            //iphone 5 app
            var oMeta = document.createElement('meta');
            oMeta.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no';
            oMeta.name = 'viewport';
            document.getElementsByTagName('head')[0].appendChild(oMeta);

            $(".text").css({width: '105px'})
            $(".text a").css({bottom: '1%'})
            $(".ji").css({width: '150px'})
            $(".con a").css({width: '45px',height:'45px'})

        };

        if ((screen.height < 667)) {
            //iphone 5 app
            var oMeta = document.createElement('meta');
            oMeta.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no';
            oMeta.name = 'viewport';
            document.getElementsByTagName('head')[0].appendChild(oMeta);

            $(".text").css({width: '105px'})
            $(".text a").css({bottom: '1%'})
            $(".ji").css({width: '150px'})
            $(".con a").css({width: '45px',height:'45px'})

        };
    })
</script>
<script></script>
</body>
</html>